<!DOCTYPE html>
<html lang="id">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Latihan Kosakata Jepang - Versi Final</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=M+PLUS+Rounded+1c:wght@400;700;800&family=Poppins:wght@400;600&display=swap' );

        :root {
            --primary-color: #5e72e4;
            --secondary-color: #8965e0;
            --success-color: #2dce89;
            --danger-color: #f5365c;
            --light-color: #f8f9fe;
            --dark-color: #32325d;
            --text-color: #525f7f;
            --card-shadow: 0 15px 35px rgba(50, 50, 93, 0.1), 0 5px 15px rgba(0, 0, 0, 0.07);
        }

        body {
            font-family: 'Poppins', sans-serif;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: var(--text-color);
            line-height: 1.6;
            margin: 0;
            padding: 20px;
            display: flex;
            justify-content: center;
            align-items: flex-start;
            min-height: 100vh;
        }

        .main-container {
            max-width: 800px;
            width: 100%;
            margin: 0 auto;
        }

        h1, h2 {
            text-align: center;
            color: var(--dark-color);
            font-weight: 800;
        }
        h1 { font-size: 2.5em; color: white; text-shadow: 0 2px 4px rgba(0,0,0,0.2); }
        h2 { font-size: 1.8em; }

        /* --- Animations --- */
        @keyframes fadeIn {
            from { opacity: 0; transform: scale(0.95); }
            to { opacity: 1; transform: scale(1); }
        }
        @keyframes popIn {
            0% { transform: scale(0.8); opacity: 0; }
            70% { transform: scale(1.05); opacity: 1; }
            100% { transform: scale(1); }
        }

        /* --- Card Styles --- */
        .card {
            background: #ffffff;
            padding: 30px;
            border-radius: 20px;
            box-shadow: var(--card-shadow);
            margin-bottom: 30px;
            animation: fadeIn 0.5s ease-out forwards;
        }

        /* Level Selection Menu */
        .level-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 15px;
            margin-top: 20px;
        }

        .level-btn {
            background: linear-gradient(45deg, #6b82fa, #8362f1);
            color: white;
            border: none;
            padding: 20px 10px;
            border-radius: 15px;
            font-size: 1.2em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
        }

        .level-btn:hover {
            transform: translateY(-5px);
            box-shadow: 0 7px 14px rgba(50, 50, 93, 0.1), 0 3px 6px rgba(0, 0, 0, 0.08);
        }

        /* Game Area */
        .progress-board {
            display: flex;
            justify-content: space-between;
            font-size: 1.2em;
            color: var(--text-color);
            margin-bottom: 20px;
            font-weight: 600;
        }

        .question-card .word {
            font-family: 'M PLUS Rounded 1c', sans-serif;
            font-size: 3.5em;
            font-weight: 800;
            color: var(--dark-color);
            margin-top: 5px;
            animation: popIn 0.4s ease-out;
            text-align: center; /* Memusatkan teks soal */
        }

        .answer-section input {
            width: calc(100% - 28px);
            padding: 14px;
            border: 2px solid #dee2e6;
            border-radius: 10px;
            font-size: 1.2em;
            text-align: center;
            transition: all 0.3s;
        }
        .answer-section input:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 3px rgba(94, 114, 228, 0.3);
        }

        button {
            width: 100%;
            padding: 14px 20px;
            border: none;
            border-radius: 10px;
            font-size: 1.1em;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.3s ease;
            box-shadow: 0 4px 6px rgba(50, 50, 93, 0.11), 0 1px 3px rgba(0, 0, 0, 0.08);
        }
        button:hover {
            transform: translateY(-2px);
        }
        button:active {
            transform: translateY(1px);
            box-shadow: none;
        }

        #submit-btn { background: var(--success-color); color: white; }
        #next-btn { background: var(--primary-color); color: white; }
        #back-to-menu-btn { background: #8898aa; color: white; margin-top: 10px; }

        .feedback {
            margin-top: 15px;
            font-size: 1.3em;
            font-weight: 700;
            min-height: 40px;
            animation: popIn 0.3s;
            text-align: center; /* Memusatkan teks feedback */
        }
        .feedback.correct { color: var(--success-color); }
        .feedback.incorrect { color: var(--danger-color); }

        /* Notes Section */
        table { width: 100%; border-collapse: collapse; margin-top: 20px; }
        th, td { padding: 12px; border: 1px solid #e9ecef; text-align: left; }
        th { background-color: var(--dark-color); color: white; }
        tr:nth-child(even) { background-color: var(--light-color); }
    </style>
</head>
<body>

    <div class="main-container">
        <h1>Êó•Êú¨Ë™û„ÇíÂ≠¶„Åº„ÅÜÔºÅ</h1>

        <div id="level-selection" class="card">
            <h2>Pilih Level</h2>
            <div id="level-grid" class="level-grid"></div>
        </div>

        <div id="game-area" class="card" style="display: none;">
            <div class="progress-board">
                <div id="level-display"></div>
                <div id="progress-display"></div>
            </div>
            <div class="question-card">
                <p>Apa arti dari kata di bawah ini?</p>
                <div class="word" id="question-word">...</div>
            </div>
            <div class="answer-section">
                <input type="text" id="answer-input" placeholder="Ketik jawaban (Bahasa Indonesia)..." autocomplete="off">
            </div>
            <div class="feedback" id="feedback-message"></div>
            <div class="button-group" style="margin-top: 20px;">
                <button id="submit-btn">Cek Jawaban</button>
                <button id="next-btn" style="display: none;">Lanjut</button>
                <button id="back-to-menu-btn" style="display: none;">Kembali ke Menu</button>
            </div>
        </div>

        <div class="card">
            <h2>Daftar Kosakata</h2>
            <table id="vocabulary-table">
                <thead>
                    <tr>
                        <th>No.</th>
                        <th>Bahasa Indonesia</th>
                        <th>Tulisan Jepang</th>
                        <th>Cara Baca (R≈çmaji)</th>
                    </tr>
                </thead>
                <tbody></tbody>
            </table>
        </div>
    </div>

    <script>
        const vocabulary = [
            { id: 'Huruf Hiragana', jp_display: '„Å≤„Çâ„Åå„Å™', romaji: 'hiragana' },
            { id: 'Huruf Katakana', jp_display: '„Ç´„Çø„Ç´„Éä', romaji: 'katakana' },
            { id: 'Huruf Kanji', jp_display: '„Åã„Çì„Åò', romaji: 'kanji' },
            { id: 'Huruf Latin', jp_display: '„É≠„Éº„Éû„Åò', romaji: 'r≈çmaji' },
            { id: 'Buku catatan', jp_display: '„Éé„Éº„Éà', romaji: 'n≈çto' },
            { id: 'Buku', jp_display: '„Åª„Çì', romaji: 'hon' },
            { id: 'Majalah Kertas', jp_display: '„Åñ„Å£„Åó', romaji: 'zasshi' },
            { id: 'Kertas', jp_display: '„Åã„Åø', romaji: 'kami' },
            { id: 'Koran', jp_display: '„Åó„Çì„Å∂„Çì', romaji: 'shinbun' },
            { id: 'Kamus', jp_display: '„Åò„Åó„Çá', romaji: 'jisho' },
            { id: 'Radio kaset', jp_display: '„É©„Ç∏„Ç™„Ç´„Çª', romaji: 'rajiokase' },
            { id: 'Gunting', jp_display: '„ÅØ„Åï„Åø', romaji: 'hasami' },
            { id: 'Radio', jp_display: '„É©„Ç∏„Ç™', romaji: 'rajio' },
            { id: 'Televisi', jp_display: '„ÉÜ„É¨„Éì', romaji: 'terebi' },
            { id: 'Kamera', jp_display: '„Ç´„É°„É©', romaji: 'kamera' },
            { id: 'Makanan', jp_display: '„Åü„Åπ„ÇÇ„ÅÆ', romaji: 'tabemono' },
            { id: 'Minuman', jp_display: '„ÅÆ„Åø„ÇÇ„ÅÆ', romaji: 'nomimono' },
            { id: 'Buah-Buahan', jp_display: '„Åè„Å†„ÇÇ„ÅÆ', romaji: 'kudamono' },
            { id: 'Nasi', jp_display: '„Åî„ÅØ„Çì', romaji: 'gohan' },
            { id: 'Roti', jp_display: '„Éë„É≥', romaji: 'pan' },
            { id: 'Rumah', jp_display: '„ÅÜ„Å°', romaji: 'uchi' },
            { id: 'Perusahaan', jp_display: '„Åã„ÅÑ„Åó„ÇÉ', romaji: 'kaisha' },
            { id: 'Pabrik', jp_display: '„Åì„ÅÜ„Åò„Çá„ÅÜ', romaji: 'k≈çj≈ç' },
            { id: 'Stasiun', jp_display: '„Åà„Åç', romaji: 'eki' },
            { id: 'Bank', jp_display: '„Åé„Çì„Åì„ÅÜ', romaji: 'gink≈ç' },
            { id: 'Rumah Sakit', jp_display: '„Å≥„Çá„ÅÜ„ÅÑ„Çì', romaji: 'by≈çin' },
            { id: 'Departmen Store', jp_display: '„Éá„Éë„Éº„Éà', romaji: 'depƒÅto' },
            { id: 'Toko Buku', jp_display: '„Åª„Çì„ÇÑ', romaji: 'honya' },
            { id: 'Kantor', jp_display: '„Åò„ÇÄ„Åó„Çá', romaji: 'jimusho' },
            { id: 'Ruang Kelas', jp_display: '„Åç„Çá„ÅÜ„Åó„Å§', romaji: 'ky≈çshitsu' },
            { id: 'Kamar', jp_display: '„Å∏„ÇÑ', romaji: 'heya' },
            { id: 'Ruang Makan', jp_display: '„Åó„Çá„Åè„Å©„ÅÜ', romaji: 'shokud≈ç' },
            { id: 'Kamar Kecil', jp_display: '„Éà„Ç§„É¨', romaji: 'toire' },
            { id: 'Lobi', jp_display: '„É≠„Éì„Éº', romaji: 'robƒ´' },
            { id: 'Resepsionis', jp_display: '„ÅÜ„Åë„Å§„Åë', romaji: 'uketsuke' },
            { id: 'Halaman', jp_display: '„Å´„Çè', romaji: 'niwa' },
            { id: 'Sumpit', jp_display: '„ÅØ„Åó', romaji: 'hashi' },
            { id: 'Pisau', jp_display: '„Éä„Ç§„Éï', romaji: 'naifu' },
            { id: 'Garpu', jp_display: '„Éï„Ç©„Éº„ÇØ', romaji: 'f≈çku' },
            { id: 'Sendok', jp_display: '„Çπ„Éó„Éº„É≥', romaji: 'sup≈´n' },
            { id: 'Kursi', jp_display: '„ÅÑ„Åô', romaji: 'isu' },
            { id: 'Meja', jp_display: '„Å§„Åè„Åà', romaji: 'tsukue' },
            { id: 'Jendela', jp_display: '„Åæ„Å©', romaji: 'mado' },
            { id: 'Pintu', jp_display: '„Éâ„Ç¢', romaji: 'doa' },
            { id: 'Lampu Listrik', jp_display: '„Åß„Çì„Åç', romaji: 'denki' },
            { id: 'Kotak', jp_display: '„ÅØ„Åì', romaji: 'hako' },
            { id: 'Mobil', jp_display: '„Åè„Çã„Åæ', romaji: 'kuruma' },
            { id: 'Pagi', jp_display: '„ÅÇ„Åï', romaji: 'asa' },
            { id: 'Siang', jp_display: '„Å≤„Çã', romaji: 'hiru' },
            { id: 'Malam', jp_display: '„Çà„Çã', romaji: 'yoru' },
            { id: 'Dasi', jp_display: '„Éç„ÇØ„Çø„Ç§', romaji: 'nekutai' },
            { id: 'Kemeja', jp_display: '„Ç∑„É£„ÉÑ', romaji: 'shatsu' },
            { id: 'Sepatu', jp_display: '„Åè„Å§', romaji: 'kutsu' },
            { id: 'Rokok', jp_display: '„Åü„Å∞„Åì', romaji: 'tabako' },
            { id: 'Asbak', jp_display: '„ÅØ„ÅÑ„Åñ„Çâ', romaji: 'haizara' },
            { id: 'Pensil', jp_display: '„Åà„Çì„Å¥„Å§', romaji: 'enpitsu' },
            { id: 'Pulpen', jp_display: '„Éú„Éº„É´„Éö„É≥', romaji: 'b≈çrupen' },
            { id: 'Kunci', jp_display: '„Åã„Åé', romaji: 'kagi' },
            { id: 'Jam', jp_display: '„Å®„Åë„ÅÑ', romaji: 'tokei' },
            { id: 'Tas', jp_display: '„Åã„Å∞„Çì', romaji: 'kaban' }
        ];

        // --- Game State & Elements ---
        let currentLevel;
        let questionsForLevel;
        let incorrectQuestions;
        const wordsPerLevel = 5;
        const clickSound = new Audio('ea.mp3');

        const levelSelectionEl = document.getElementById('level-selection');
        const gameAreaEl = document.getElementById('game-area');
        const levelGridEl = document.getElementById('level-grid');
        const questionWordEl = document.getElementById('question-word');
        const answerInputEl = document.getElementById('answer-input');
        const feedbackMessageEl = document.getElementById('feedback-message');
        const levelDisplayEl = document.getElementById('level-display');
        const progressDisplayEl = document.getElementById('progress-display');
        const submitBtn = document.getElementById('submit-btn');
        const nextBtn = document.getElementById('next-btn');
        const backToMenuBtn = document.getElementById('back-to-menu-btn');
        const tableBody = document.querySelector("#vocabulary-table tbody");

        // --- Functions ---
        function playClickSound() {
            clickSound.currentTime = 0;
            clickSound.play().catch(error => console.log("Audio play failed:", error));
        }

        function showLevelSelection() {
            levelSelectionEl.style.display = 'block';
            gameAreaEl.style.display = 'none';
        }

        function showGameArea() {
            levelSelectionEl.style.display = 'none';
            gameAreaEl.style.display = 'block';
            gameAreaEl.style.animation = 'fadeIn 0.5s ease-out forwards';
        }

        function createLevelButtons() {
            const numLevels = Math.ceil(vocabulary.length / wordsPerLevel);
            levelGridEl.innerHTML = '';
            for (let i = 0; i < numLevels; i++) {
                const levelBtn = document.createElement('button');
                levelBtn.className = 'level-btn';
                levelBtn.textContent = `Level ${i + 1}`;
                levelBtn.dataset.level = i + 1;
                levelBtn.addEventListener('click', () => {
                    playClickSound();
                    startLevel(i + 1);
                });
                levelGridEl.appendChild(levelBtn);
            }
        }

        function startLevel(level) {
            currentLevel = level;
            const levelStartIndex = (level - 1) * wordsPerLevel;
            const levelEndIndex = Math.min(levelStartIndex + wordsPerLevel, vocabulary.length);
            questionsForLevel = vocabulary.slice(levelStartIndex, levelEndIndex);
            incorrectQuestions = [];
            showGameArea();
            setQuestion();
        }

        function setQuestion() {
            if (questionsForLevel.length === 0 && incorrectQuestions.length === 0) {
                questionWordEl.textContent = "üèÜ";
                feedbackMessageEl.innerHTML = `<strong>Selamat! Level ${currentLevel} selesai!</strong>`;
                answerInputEl.style.display = 'none';
                submitBtn.style.display = 'none';
                nextBtn.style.display = 'none';
                backToMenuBtn.style.display = 'block';
                return;
            }

            if (questionsForLevel.length === 0) {
                questionsForLevel = incorrectQuestions;
                incorrectQuestions = [];
                feedbackMessageEl.textContent = "Ulangi soal yang salah...";
            }

            updateProgress();
            const question = questionsForLevel[0];
            questionWordEl.textContent = question.jp_display;
            questionWordEl.style.animation = 'none';
            requestAnimationFrame(() => {
                questionWordEl.style.animation = 'popIn 0.4s ease-out';
            });
            
            answerInputEl.value = '';
            if (feedbackMessageEl.className !== 'feedback') {
                feedbackMessageEl.textContent = '';
            }
            feedbackMessageEl.className = 'feedback';
            answerInputEl.disabled = false;
            answerInputEl.style.display = 'block';
            submitBtn.style.display = 'block';
            nextBtn.style.display = 'none';
            backToMenuBtn.style.display = 'none';
            answerInputEl.focus();
        }

        function updateProgress() {
            const totalQuestionsInLevel = Math.min(wordsPerLevel, vocabulary.length - ((currentLevel - 1) * wordsPerLevel));
            const questionsAnswered = totalQuestionsInLevel - questionsForLevel.length - incorrectQuestions.length;
            levelDisplayEl.textContent = `Level: ${currentLevel}`;
            progressDisplayEl.textContent = `Soal: ${questionsAnswered + 1}/${totalQuestionsInLevel}`;
        }

        function checkAnswer() {
            const userAnswer = answerInputEl.value.trim().toLowerCase();
            if (!userAnswer) return;

            const currentQuestion = questionsForLevel[0];
            const correctAnswer = currentQuestion.id.toLowerCase();

            if (userAnswer === correctAnswer) {
                feedbackMessageEl.textContent = 'Benar! üéâ';
                feedbackMessageEl.className = 'feedback correct';
            } else {
                feedbackMessageEl.innerHTML = `Salah. Jawaban: <strong>${currentQuestion.id}</strong>`;
                feedbackMessageEl.className = 'feedback incorrect';
                incorrectQuestions.push(currentQuestion);
            }
            
            questionsForLevel.shift();
            answerInputEl.disabled = true;
            submitBtn.style.display = 'none';
            nextBtn.style.display = 'block';
            nextBtn.focus();
        }

        function populateTable() {
            vocabulary.forEach((word, index) => {
                const row = tableBody.insertRow();
                row.innerHTML = `
                    <td>${index + 1}</td>
                    <td>${word.id}</td>
                    <td>${word.jp_display}</td>
                    <td>${word.romaji}</td>
                `;
            });
        }

        // --- Event Listeners ---
        document.querySelectorAll('button').forEach(button => {
            button.addEventListener('click', playClickSound);
        });
        submitBtn.addEventListener('click', checkAnswer);
        nextBtn.addEventListener('click', setQuestion);
        backToMenuBtn.addEventListener('click', showLevelSelection);
        answerInputEl.addEventListener('keypress', (event) => {
            if (event.key === 'Enter') {
                if (submitBtn.style.display !== 'none') {
                    playClickSound();
                    checkAnswer();
                } else if (nextBtn.style.display !== 'none') {
                    playClickSound();
                    setQuestion();
                }
            }
        });

        // --- Initialization ---
        function initialize() {
            populateTable();
            createLevelButtons();
            showLevelSelection();
        }

        initialize();
    </script>

</body>
</html>
